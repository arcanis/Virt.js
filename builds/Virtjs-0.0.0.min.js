/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e){var t=e();typeof define=="function"&&define.amd&&define([],function(){return t})})(function(){var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("../tools/Almond-0.2.9.min",function(){}),define("../../libraries/base/./core/../utils/./Object",[],function(){return{extend:function(){var e=arguments[0];for(var t=1,n=arguments.length;t<n;++t){var r=arguments[t];if(r==null)continue;Object.keys(r).forEach(function(t){e[t]=r[t]})}return e}}}),define("../../libraries/base/./core/../utils/Class",["./Object"],function(e){var t=function(){var e=this;e._options=arguments[e.initialize.length]||{},e.initialize.apply(e,arguments)};return t.extend=function(n,r,i){n instanceof Array||(i=r,r=n,n=[]);var s=function(){return t.apply(this,arguments)},o=function(){};return o.prototype=this.prototype,s.prototype=new o,s.prototype.constructor=s,n.forEach(function(t){e.extend(s.prototype,t)}),e.extend(s,this,i),e.extend(s.prototype,r),s},t.prototype.initialize=function(){},t}),define("../../libraries/base/./core/../utils/Debug",[],function(){var Esprima=typeof window!="undefined"?window.esprima:require("esprima"),Escodegen=typeof window!="undefined"?window.escodegen:require("escodegen"),executePreprocessing=function(preprocess,root){return findBranches(root,function(node){if(!usesPreprocessVariable(node.test))return node;if(usesUndeclaredVariables(node.test,["this","arguments","preprocess"]))throw new Error("Preprocessed branches cannot access other variables than `preprocess`");var test=Escodegen.generate(node.test),branch=eval(test)?node.consequent:node.alternate;return executePreprocessing(preprocess,branch||{type:"EmptyStatement"})})},findBranches=function(e,t){return e.type==="IfStatement"&&(e=t(e)),Object.keys(e).forEach(function(n){var r=e[n];if(typeof r!="object"||r===null)return;if(!Array.isArray(r)){e[n]=findBranches(r,t);return}r.forEach(function(e,n){r[n]=findBranches(e,t)})}),e},usesPreprocessVariable=function(e){return e.type==="Identifier"&&e.name==="preprocess"?!0:e.type==="MemberExpression"?!1:Object.keys(e).some(function(t){var n=e[t];return typeof n!="object"||n===null?!1:Array.isArray(n)?n.some(function(e){return usesPreprocessVariable(e)}):usesPreprocessVariable(n)})},usesUndeclaredVariables=function(e,t){return!1},isVariable=function(e){return function(t){return t.type==="Identifier"&&t.name===e}},validatesWhitelist=function(e){return function(t){return t.type!=="Identifier"||e.indexOf(t.name)!==-1}};return{monitorFunction:function(){if(typeof arguments[1]=="function")var e=arguments[0],t=arguments[1];else var n=arguments[0],r=arguments[1],e=n[r],t=arguments[2];typeof t=="undefined"&&(t=function(t,n,i){var s=t?"instancied":"called",o=JSON.stringify(Array.prototype.slice.call(i));console.trace('Monitored function "'+(r||e.name)+'" '+s+" with arguments "+o)});var i=function(){var n=this instanceof i;t&&t(n,this,arguments);if(!n)return e.apply(this,arguments);var r=[null].concat(Array.prototype.slice.call(arguments)),s=Function.prototype.bind.apply(e,r);return new s};return i.drop=function(){t=null},n&&(n[r]=i),i},preprocessFunction:function(){if(arguments.length<=2)var fn=arguments[0],preprocess=arguments[1];else var instance=arguments[0],method=arguments[1],fn=instance[method],preprocess=arguments[2];var ast=Esprima.parse("("+fn.toString()+")");if(usesUndeclaredVariables(ast))throw new Error("Preprocessed functions cannot make use of non-local variables");var newFn=eval((instance?"instance."+method+" = ":"")+Escodegen.generate(executePreprocessing(preprocess,ast)));return newFn}}}),define("../../libraries/base/./core/Engine",["../utils/Class","../utils/Debug"],function(e,t){return e.extend({initialize:function(){t.preprocessFunction(this,"_setStatus",this._options),this._setStatus("stopped"),this._waiting=!1,this._nextTick_=this._nextTick.bind(this)},load:function(){var e=arguments[this.load.length-1]||{},t=e.autoResume;typeof t=="undefined"&&(t=!0),this._status!=="stopped"&&this._setStatus("paused"),this._load.apply(this,arguments),this._status!=="paused"&&this._setStatus("paused"),t&&this.resume()},resume:function(){if(this._status!=="paused")return;this._setStatus("running"),this._waiting||this._nextTick()},pause:function(){if(this._status!=="running")return;this._setStatus("paused")},one:function(){if(this._status!=="paused")return;this._setStatus("running"),this.step(),this._setStatus("paused")},stop:function(){if(this._status!=="running"&&this._status!=="paused")return;this._setStatus("stopped")},_setStatus:function(e){this._status=e,typeof preprocess!="undefined"&&(preprocess.events||[]).indexOf("status")!==-1&&this.emit("status",{status:e})},_nextTick:function(){this._status!=="running"?this._waiting=!1:(this._options.devices.timer.nextTick(this._nextTick_),this.step(),this._waiting=!0)}})}),define("../../libraries/base/./mixins/Emitter",[],function(){return{on:function(e,t){typeof this._listeners=="undefined"&&(this._listeners={}),typeof this._listeners[e]=="undefined"&&(this._listeners[e]=[]),this._listeners[e].push(t)},off:function(e,t){if(typeof this._listeners=="undefined")return;if(typeof this._listeners[e]=="undefined")return;var n=this._listeners[e].indexOf(t);this._listeners[e].splice(n,1)},emit:function(e,t){if(typeof this._listeners=="undefined")return;if(typeof this._listeners[e]=="undefined")return;this._listeners[e].forEach(function(e){e(t)});if(typeof this._listeners["*"]=="undefined")return;this._listeners["*"].forEach(function(n){n(e,t)})}}}),define("../../libraries/base/./utils/./Object",[],function(){return{extend:function(){var e=arguments[0];for(var t=1,n=arguments.length;t<n;++t){var r=arguments[t];if(r==null)continue;Object.keys(r).forEach(function(t){e[t]=r[t]})}return e}}}),define("../../libraries/base/./utils/Class",["./Object"],function(e){var t=function(){var e=this;e._options=arguments[e.initialize.length]||{},e.initialize.apply(e,arguments)};return t.extend=function(n,r,i){n instanceof Array||(i=r,r=n,n=[]);var s=function(){return t.apply(this,arguments)},o=function(){};return o.prototype=this.prototype,s.prototype=new o,s.prototype.constructor=s,n.forEach(function(t){e.extend(s.prototype,t)}),e.extend(s,this,i),e.extend(s.prototype,r),s},t.prototype.initialize=function(){},t}),define("../../libraries/base/./utils/Debug",[],function(){var Esprima=typeof window!="undefined"?window.esprima:require("esprima"),Escodegen=typeof window!="undefined"?window.escodegen:require("escodegen"),executePreprocessing=function(preprocess,root){return findBranches(root,function(node){if(!usesPreprocessVariable(node.test))return node;if(usesUndeclaredVariables(node.test,["this","arguments","preprocess"]))throw new Error("Preprocessed branches cannot access other variables than `preprocess`");var test=Escodegen.generate(node.test),branch=eval(test)?node.consequent:node.alternate;return executePreprocessing(preprocess,branch||{type:"EmptyStatement"})})},findBranches=function(e,t){return e.type==="IfStatement"&&(e=t(e)),Object.keys(e).forEach(function(n){var r=e[n];if(typeof r!="object"||r===null)return;if(!Array.isArray(r)){e[n]=findBranches(r,t);return}r.forEach(function(e,n){r[n]=findBranches(e,t)})}),e},usesPreprocessVariable=function(e){return e.type==="Identifier"&&e.name==="preprocess"?!0:e.type==="MemberExpression"?!1:Object.keys(e).some(function(t){var n=e[t];return typeof n!="object"||n===null?!1:Array.isArray(n)?n.some(function(e){return usesPreprocessVariable(e)}):usesPreprocessVariable(n)})},usesUndeclaredVariables=function(e,t){return!1},isVariable=function(e){return function(t){return t.type==="Identifier"&&t.name===e}},validatesWhitelist=function(e){return function(t){return t.type!=="Identifier"||e.indexOf(t.name)!==-1}};return{monitorFunction:function(){if(typeof arguments[1]=="function")var e=arguments[0],t=arguments[1];else var n=arguments[0],r=arguments[1],e=n[r],t=arguments[2];typeof t=="undefined"&&(t=function(t,n,i){var s=t?"instancied":"called",o=JSON.stringify(Array.prototype.slice.call(i));console.trace('Monitored function "'+(r||e.name)+'" '+s+" with arguments "+o)});var i=function(){var n=this instanceof i;t&&t(n,this,arguments);if(!n)return e.apply(this,arguments);var r=[null].concat(Array.prototype.slice.call(arguments)),s=Function.prototype.bind.apply(e,r);return new s};return i.drop=function(){t=null},n&&(n[r]=i),i},preprocessFunction:function(){if(arguments.length<=2)var fn=arguments[0],preprocess=arguments[1];else var instance=arguments[0],method=arguments[1],fn=instance[method],preprocess=arguments[2];var ast=Esprima.parse("("+fn.toString()+")");if(usesUndeclaredVariables(ast))throw new Error("Preprocessed functions cannot make use of non-local variables");var newFn=eval((instance?"instance."+method+" = ":"")+Escodegen.generate(executePreprocessing(preprocess,ast)));return newFn}}}),define("../../libraries/base/./utils/Format",[],function(){return{decimal:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(10);if(typeof t!="undefined")while(n.length<t)n="0"+n;return n},relativeAddress:function(e,t,n,r){var i=t<0?"-":"+";if(typeof t!="string"||!isNaN(t))t=this.address(Math.abs(t),r);return this.address(e,n)+i+t},string:function(e,t,n){e=e.toString();if(typeof t=="undefined")return e;typeof n=="undefined"&&(n=!0);for(var r=e.length;r<t;++r)n?e+=" ":e=" "+e;return e},address:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(16).toLowerCase();if(typeof t!="undefined")while(n.length<Math.ceil(t/4))n="0"+n;return"$"+n},hexadecimal:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(16).toLowerCase();if(typeof t!="undefined")while(n.length<Math.ceil(t/4))n="0"+n;return"0x"+n},binary:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(2);if(typeof t!="undefined")while(n.length<t)n="0"+n;return"0b"+n}}}),define("../../libraries/base/./utils/Function",[],function(){return{fastBind:function(fn,context){var argumentCount=fn.length,providenArguments=Array.prototype.slice.call(arguments,2);return fn.bind.apply(fn,[context].concat(providenArguments));var parameterStringParts,parameterString,argumentString}}}),define("../../libraries/base/./utils/Log",[],function(){return{image:function(e){var t=e.width,n=e.height,r=e.toDataUrl();console.log("%c",function(e){return Object.keys(e).map(function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+e[t]}).join(";")}({lineHeight:0,paddingLeft:t+"px",paddingTop:n+"px",backgroundImage:"url("+r+")"}))}}}),define("../../libraries/base/./utils/./Format",[],function(){return{decimal:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(10);if(typeof t!="undefined")while(n.length<t)n="0"+n;return n},relativeAddress:function(e,t,n,r){var i=t<0?"-":"+";if(typeof t!="string"||!isNaN(t))t=this.address(Math.abs(t),r);return this.address(e,n)+i+t},string:function(e,t,n){e=e.toString();if(typeof t=="undefined")return e;typeof n=="undefined"&&(n=!0);for(var r=e.length;r<t;++r)n?e+=" ":e=" "+e;return e},address:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(16).toLowerCase();if(typeof t!="undefined")while(n.length<Math.ceil(t/4))n="0"+n;return"$"+n},hexadecimal:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(16).toLowerCase();if(typeof t!="undefined")while(n.length<Math.ceil(t/4))n="0"+n;return"0x"+n},binary:function(e,t){if(isNaN(e))return"NaN";var n=e.toString(2);if(typeof t!="undefined")while(n.length<t)n="0"+n;return"0b"+n}}}),define("../../libraries/base/./utils/./Function",[],function(){return{fastBind:function(fn,context){var argumentCount=fn.length,providenArguments=Array.prototype.slice.call(arguments,2);return fn.bind.apply(fn,[context].concat(providenArguments));var parameterStringParts,parameterString,argumentString}}}),define("../../libraries/base/./utils/Memory",["./Format","./Function"],function(e,t){return{unaddressable:function(t,n){return function(t,r){throw new Error("Address "+e.address(r,n)+" is unaddressable")}},immutable:function(e){return function(){return e}},accessor:function(){if(!arguments[0])throw new Error("Undefined accessor cannot be bound");return t.fastBind.apply(t,arguments)},plainOldData:function(e,t){if(!e)throw new Error("Un undefined object cannot be mapped");return[e,t]}}}),define("../../libraries/base/./utils/Object",[],function(){return{extend:function(){var e=arguments[0];for(var t=1,n=arguments.length;t<n;++t){var r=arguments[t];if(r==null)continue;Object.keys(r).forEach(function(t){e[t]=r[t]})}return e}}}),define("../../libraries/base/./utils/Reflection",[],function(){return{resetScope:function(){var reflectionInstance,reflectionMember,reflectionFunction,reflectionNewScope;return arguments.length<=2?(reflectionFunction=arguments[0],reflectionNewScope=arguments[1]):arguments.length<=3?(reflectionInstance=arguments[0],reflectionMember=arguments[1],reflectionFunction=arguments[0][arguments[1]],reflectionNewScope=arguments[2]):arguments.length<=4&&(reflectionInstance=arguments[0],reflectionMember=arguments[1],reflectionFunction=arguments[2],reflectionNewScope=arguments[3]),Object.keys(reflectionNewScope).length&&eval("var "+Object.keys(reflectionNewScope).map(function(e){return e+" = reflectionNewScope."+e}).join(",")+";"),eval((reflectionInstance?"reflectionInstance."+reflectionMember+" = ":"")+"("+reflectionFunction.toString()+")")}}}),define("../../libraries/base/index",["./core/Engine","./mixins/Emitter","./utils/Class","./utils/Debug","./utils/Format","./utils/Function","./utils/Log","./utils/Memory","./utils/Object","./utils/Reflection"],function(e,t,n,r,i,s,o,u,a,f){if(typeof window!="undefined")var l=window,c="Virtjs";else var l=module,c="exports";return l[c]={ClassUtil:n,DebugUtil:r,FormatUtil:i,FunctionUtil:s,LogUtil:o,MemoryUtil:u,ObjectUtil:a,ReflectionUtil:f,EmitterMixin:t,Engine:e,create:function(e,t){return new e(t)},data:{},engine:{},input:{},screen:{},timer:{},debug:{}}}),require(["../../libraries/base/index"])});